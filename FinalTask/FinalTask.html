<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <link href="https://fonts.googleapis.com/earlyaccess/hannari.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Noto+Sans+JP:wght@100..900&family=Noto+Serif+JP:wght@200..900&display=swap" rel="stylesheet">
</head>
<body> 
  <nav class="navbar navbar-dark bg-primary mb-4" style="height: 120px; position: relative;">
    <div class="container-fluid h-100 d-flex flex-column justify-content-center align-items-center">
      <div class="w-100 text-center text-white" style="font-size:2rem;">
        <h1>登山計画</h1>
      </div>
      <ul class="navbar-nav flex-row justify-content-center w-100 mt-2">
        <li class="nav-item">
          <a class="nav-link active text-white" aria-current="page" href="https://example.com" target="_blank">ホーム</a>
        </li>
        <li class="nav-item d-flex align-items-center">
          <span class="mx-2 text-white">|</span>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="https://example.com" target="_blank">山一覧</a>
        </li>
        <li class="nav-item d-flex align-items-center">
          <span class="mx-2 text-white">|</span>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="https://example.com" target="_blank">ブログ</a>
        </li>
        <li class="nav-item d-flex align-items-center">
          <span class="mx-2 text-white">|</span>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="https://example.com" target="_blank">お問い合わせ</a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="container">
    <!-- タブナビゲーション -->
    <ul class="nav nav-tabs mb-4" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link tab-yari active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab">槍ヶ岳</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link tab-map" id="map-tab" data-bs-toggle="tab" data-bs-target="#maptab" type="button" role="tab">地図</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link tab-plan" id="plan-tab" data-bs-toggle="tab" data-bs-target="#plan" type="button" role="tab">計画</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link tab-contact" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab">お問い合わせ</button>
      </li>
    </ul>

    <!-- タブの内容 -->
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active tab-bg-yari" id="home" role="tabpanel">
        <h1 class="mb-4">槍ヶ岳</h1>
        <p class="lead mb-4">ここでは槍ヶ岳の登山計画についてまとめる。</p>
        <p>今年度は標高3180m,槍ヶ岳を目指す。</p>
        <div class="card mb-4 mx-auto" style="max-width: 1000px;">
          <div class="card-body">
            <h5 class="card-title">槍ヶ岳</h5>
            <ul class="card-text">
              <li>標高：3,180m（日本で5番目に高い山）</li>
              <li>場所：長野県・岐阜県の県境</li>
              <li>特徴：鋭い山頂が「槍」のように見える</li>
              <li>登山難易度：中級～上級者向け</li>
              <li>人気の登山ルート：上高地～槍沢～槍ヶ岳山荘～山頂</li>
              <li>山小屋：槍ヶ岳山荘など複数あり</li>
              <li>注意点：天候急変・落石・混雑に注意</li>
            </ul>
            <img src="https://raw.githubusercontent.com/maxiohashi/ServiceFinalTask/main/images/image-card.jpeg" class="img-fluid w-100 mb-3" alt="常念岳・蝶ヶ岳方面から見た槍ヶ岳の写真">
            <p>常念岳・蝶ヶ岳方面から見た槍ヶ岳</p>
            <p>鋭い山頂により一目でわかる</p>
            <a href="https://www.yarigatake.co.jp" class="btn btn-primary" target="_blank" rel="noopener">詳細を見る</a>
          </div>
        </div>
      </div>
      <div class="tab-pane fade tab-bg-map" id="maptab" role="tabpanel">
        <h2 class="mb-4">登山地図</h2>
        <p>槍ヶ岳は北アルプス・長野県と岐阜県の県境に位置する。</p>
        <div id="map" style="height:400px;"></div>
        登頂には上高地・新穂高温泉・中房温泉という3カ所からのアプローチが可能となっており、合計で6つのコースがある。<br>
        今回は新穂高温泉からの槍平小屋を経由する新穂高（右俣）コースを選択する。
        <p>登山ルートの地図</p>
        <img src="https://www.yarigatake.co.jp/wp/wp-content/themes/yarigatake/img/route/route04/2025/route04.jpg" class="img-fluid mb-3" alt="槍ヶ岳の登山ルート">
        <small class="d-block text-muted mb-3">
          引用元：<a href="https://www.yarigatake.co.jp/climbing-info/route/" target="_blank">槍ヶ岳山荘公式サイト 登山ルート</a>
        </small>
      </div>

      <div class="tab-pane fade tab-bg-plan" id="plan" role="tabpanel">
        <h2 class="mb-4">計画</h2>
        <p>行動計画</p>
        以下の所要時間表を参考に、登山計画を立てる。
        <img src="https://www.yarigatake.co.jp/wp/wp-content/themes/yarigatake/img/route/route04/route04_roadmap.jpg" class="img-fluid mb-3" alt="槍ヶ岳の登山ルート">
        <small class="d-block text-muted mb-3">
          引用元：<a href="https://www.yarigatake.co.jp/climbing-info/route/" target="_blank">槍ヶ岳山荘公式サイト 登山ルート</a>
        </small>
        山小屋に15:30までに到着することを考えると、7時に登山口を出発することを目標とする。
        <h3 class="mt-4">持ち物チェックリスト</h3>
        <ul class="list-group mb-4">
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item1">
            <label class="form-check-label" for="item1">登山靴</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item2">
            <label class="form-check-label" for="item2">ザック（リュックサック）</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item3">
            <label class="form-check-label" for="item3">レインウェア（雨具）</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item4">
            <label class="form-check-label" for="item4">防寒着（フリース・ダウンなど）</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item5">
            <label class="form-check-label" for="item5">水・飲み物</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item6">
            <label class="form-check-label" for="item6">行動食・非常食</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item7">
            <label class="form-check-label" for="item7">地図・コンパス・GPS</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item8">
            <label class="form-check-label" for="item8">ヘッドランプ・予備電池</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item9">
            <label class="form-check-label" for="item9">帽子・手袋</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item10">
            <label class="form-check-label" for="item10">救急セット・常備薬</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item11">
            <label class="form-check-label" for="item11">保険証のコピー</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item12">
            <label class="form-check-label" for="item12">携帯電話・充電器</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item13">
            <label class="form-check-label" for="item13">タオル・ティッシュ・ゴミ袋</label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-2" type="checkbox" id="item14">
            <label class="form-check-label" for="item14">着替え・洗面用具</label>
          </li>
        </ul>
      </div>
      <div class="tab-pane fade tab-bg-contact" id="contact" role="tabpanel">
        <h2 class="mb-4">お問い合わせ</h2>
        <p>ご質問やご意見がありましたら、以下のフォームからお問い合わせください。</p>
        <form>
          <div class="mb-3">
            <label for="email" class="form-label">メールアドレス</label>
            <input type="email" class="form-control" id="email" placeholder="メールアドレスを入力してください">
          </div>
          <div class="mb-3">
            <label for="message" class="form-label">メッセージ</label>
            <textarea class="form-control" id="message" rows="3" placeholder="メッセージを入力してください"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">送信</button>
        </form>
      </div>
    </div>
  </div>
  <br>
  <!-- 画像ギャラリー部分 -->
  <h1 class="caveat-brush-regular">Photo Gallery</h1>
  <div class="container my-5">
    <div id="random-photos-flex" class="d-flex flex-wrap gap-2"></div>
    <div id="more-indicator" class="mt-2 fw-bold text-center"></div>
    <div id="photo-modal" style="display:none; position:fixed; z-index:1050; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.8); justify-content:center; align-items:center;">
      <button id="modal-prev" style="position:absolute; left:30px; top:50%; transform:translateY(-50%); background:none; border:none; color:#fff; font-size:3rem; cursor:pointer; z-index:2; user-select:none;">&#8592;</button>
      <img id="modal-img" src="" alt="拡大画像" style="max-width:90vw; max-height:90vh; border-radius:10px; box-shadow:0 0 20px #000;">
      <button id="modal-next" style="position:absolute; right:30px; top:50%; transform:translateY(-50%); background:none; border:none; color:#fff; font-size:3rem; cursor:pointer; z-index:2; user-select:none;">&#8594;</button>
      <span id="modal-close" style="position:absolute; top:30px; right:40px; color:#fff; font-size:2.5rem; cursor:pointer; font-weight:bold;">&times;</span>
    </div>
  </div>

  <script>
    const photoList = Array.from({length: 26}, (_, i) => `image-${i+1}.jpeg`);
    let currentModalIndex = 0;
    let currentPhotoSet = [];

    function showRandomPhotosFlex() {
      const shuffled = photoList.sort(() => Math.random() - 0.5);
      const selected = shuffled.slice(0, 20);
      currentPhotoSet = selected;

      const photoRow = document.getElementById("random-photos-flex");
      photoRow.innerHTML = "";
      selected.forEach((filename, idx) => {
        const img = document.createElement("img");
        img.src = `https://raw.githubusercontent.com/maxiohashi/ServiceFinalTask/main/images/${filename}`;
        img.alt = `写真${idx+1}`;
        img.className = "flex-img";
        // 拡大表示用
        img.style.cursor = "pointer";
        img.addEventListener("click", function() {
          openModal(idx);
        });
        photoRow.appendChild(img);
      });
    }

    function openModal(idx) {
      currentModalIndex = idx;
      const modal = document.getElementById("photo-modal");
      const modalImg = document.getElementById("modal-img");
      modalImg.src = `https://raw.githubusercontent.com/maxiohashi/ServiceFinalTask/main/images/${currentPhotoSet[currentModalIndex]}`;
      modal.style.display = "flex";
      updateModalArrows();
    }

    function updateModalArrows() {
      document.getElementById("modal-prev").style.display = (currentModalIndex > 0) ? "block" : "none";
      document.getElementById("modal-next").style.display = (currentModalIndex < currentPhotoSet.length - 1) ? "block" : "none";
    }

    showRandomPhotosFlex();
    // タブの切り替え時にimageを更新
    document.querySelectorAll('button[data-bs-toggle="tab"]').forEach(btn => {
      btn.addEventListener('shown.bs.tab', function(e) {
        showRandomPhotosFlex();
      });
    });
    // モーダルの操作
    document.addEventListener("DOMContentLoaded", function() {
      const modal = document.getElementById("photo-modal");
      const closeBtn = document.getElementById("modal-close");
      const prevBtn = document.getElementById("modal-prev");
      const nextBtn = document.getElementById("modal-next");
      const modalImg = document.getElementById("modal-img");

      modal.addEventListener("click", function(e) {
        if (e.target === modal || e.target === closeBtn) {
          modal.style.display = "none";
        }
      });
      prevBtn.addEventListener("click", function(e) {
        e.stopPropagation();
        if (currentModalIndex > 0) {
          currentModalIndex--;
          modalImg.src = `https://raw.githubusercontent.com/maxiohashi/ServiceFinalTask/main/images/${currentPhotoSet[currentModalIndex]}`;
          updateModalArrows();
        }
      });
      nextBtn.addEventListener("click", function(e) {
        e.stopPropagation();
        if (currentModalIndex < currentPhotoSet.length - 1) {
          currentModalIndex++;
          modalImg.src = `https://raw.githubusercontent.com/maxiohashi/ServiceFinalTask/main/images/${currentPhotoSet[currentModalIndex]}`;
          updateModalArrows();
        }
      });

      document.addEventListener("keydown", function(e) {
        if (modal.style.display === "flex") {
          if (e.key === "ArrowLeft" && currentModalIndex > 0) {
            currentModalIndex--;
            modalImg.src = `https://raw.githubusercontent.com/maxiohashi/ServiceFinalTask/main/images/${currentPhotoSet[currentModalIndex]}`;
            updateModalArrows();
          } else if (e.key === "ArrowRight" && currentModalIndex < currentPhotoSet.length - 1) {
            currentModalIndex++;
            modalImg.src = `https://raw.githubusercontent.com/maxiohashi/ServiceFinalTask/main/images/${currentPhotoSet[currentModalIndex]}`;
            updateModalArrows();
          } else if (e.key === "Escape") {
            modal.style.display = "none";
          }
        }
      });
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // 地図の初期化
    let mapInitialized = false;
    document.getElementById('map-tab').addEventListener('shown.bs.tab', function () {
      if (!mapInitialized) {
        var map = L.map('map').setView([36.342033, 137.647621], 7); // 槍ヶ岳
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        var marker = L.marker([36.342033, 137.647621]).addTo(map);
        marker.bindPopup("<b>槍ヶ岳</b><br>標高3,180mの名峰").openPopup();

        mapInitialized = true;
      }
    });
  </script>
</body>
</html>
